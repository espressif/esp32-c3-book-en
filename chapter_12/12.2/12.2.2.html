<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Light-sleep Mode - ESP32-C3 Wireless Adventure: A Comprehensive Guide to IoT</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="A comprehensive guide to IoT">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="../../favicon.svg">
                        <link rel="shortcut icon" href="../../favicon.png">
                <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
                <link rel="stylesheet" href="../../css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="../../fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
                <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><a href="../../preface/authors_note.html">Author‚Äôs Note</a></li><li class="chapter-item expanded affix "><a href="../../preface/how_to_use.html">How to use this book?</a></li><li class="chapter-item expanded affix "><li class="part-title">Preparation</li><li class="chapter-item expanded "><a href="../../chapter_1/index.html"><strong aria-hidden="true">1.</strong> Introduction to IoT</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_1/1.1.html"><strong aria-hidden="true">1.1.</strong> Architecture of IoT</a></li><li class="chapter-item expanded "><a href="../../chapter_1/1.2.html"><strong aria-hidden="true">1.2.</strong> IoT Application in Smart Homes</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_2/index.html"><strong aria-hidden="true">2.</strong> Introduction and Practice of IoT Projects</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_2/2.1/index.html"><strong aria-hidden="true">2.1.</strong> Introduction to Typical IoT Projects</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_2/2.1/2.1.1.html"><strong aria-hidden="true">2.1.1.</strong> Basic Modules for Common IoT Devices</a></li><li class="chapter-item expanded "><a href="../../chapter_2/2.1/2.1.2.html"><strong aria-hidden="true">2.1.2.</strong> Basic Modules of Client Applications</a></li><li class="chapter-item expanded "><a href="../../chapter_2/2.1/2.1.3.html"><strong aria-hidden="true">2.1.3.</strong> Introduction to Common IoT Cloud Platforms</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_2/2.2/index.html"><strong aria-hidden="true">2.2.</strong> üßê Practice: Smart Light Project</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_2/2.2/2.2.1.html"><strong aria-hidden="true">2.2.1.</strong> Project Structure</a></li><li class="chapter-item expanded "><a href="../../chapter_2/2.2/2.2.2.html"><strong aria-hidden="true">2.2.2.</strong> Project Functions</a></li><li class="chapter-item expanded "><a href="../../chapter_2/2.2/2.2.3.html"><strong aria-hidden="true">2.2.3.</strong> Hardware Preparation</a></li><li class="chapter-item expanded "><a href="../../chapter_2/2.2/2.2.4.html"><strong aria-hidden="true">2.2.4.</strong> Development Process</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_2/summary.html"><strong aria-hidden="true">2.3.</strong> Summary</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_3/index.html"><strong aria-hidden="true">3.</strong> Introduction to ESP RainMaker</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_3/3.1.html"><strong aria-hidden="true">3.1.</strong> What is ESP RainMaker?</a></li><li class="chapter-item expanded "><a href="../../chapter_3/3.2/index.html"><strong aria-hidden="true">3.2.</strong> The Implementation of ESP RainMaker</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_3/3.2/3.2.1.html"><strong aria-hidden="true">3.2.1.</strong> Claiming Service</a></li><li class="chapter-item expanded "><a href="../../chapter_3/3.2/3.2.2.html"><strong aria-hidden="true">3.2.2.</strong> RainMaker Agent</a></li><li class="chapter-item expanded "><a href="../../chapter_3/3.2/3.2.3.html"><strong aria-hidden="true">3.2.3.</strong> Cloud Backend</a></li><li class="chapter-item expanded "><a href="../../chapter_3/3.2/3.2.4.html"><strong aria-hidden="true">3.2.4.</strong> RainMaker Client</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_3/3.3.html"><strong aria-hidden="true">3.3.</strong> üßê Practice: Key Points for Developing with ESP RainMaker</a></li><li class="chapter-item expanded "><a href="../../chapter_3/3.4/index.html"><strong aria-hidden="true">3.4.</strong> Features of ESP RainMaker</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_3/3.4/3.4.1.html"><strong aria-hidden="true">3.4.1.</strong> User Management</a></li><li class="chapter-item expanded "><a href="../../chapter_3/3.4/3.4.2.html"><strong aria-hidden="true">3.4.2.</strong> End User Features</a></li><li class="chapter-item expanded "><a href="../../chapter_3/3.4/3.4.3.html"><strong aria-hidden="true">3.4.3.</strong> Admin Features</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_3/summary.html"><strong aria-hidden="true">3.5.</strong> Summary</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_4/index.html"><strong aria-hidden="true">4.</strong> Setting Up Development Environment</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_4/4.1/index.html"><strong aria-hidden="true">4.1.</strong> ESP-IDF Overview</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_4/4.1/4.1.1.html"><strong aria-hidden="true">4.1.1.</strong> ESP-IDF Versions</a></li><li class="chapter-item expanded "><a href="../../chapter_4/4.1/4.1.2.html"><strong aria-hidden="true">4.1.2.</strong> ESP-IDF Git Workflow</a></li><li class="chapter-item expanded "><a href="../../chapter_4/4.1/4.1.3.html"><strong aria-hidden="true">4.1.3.</strong> Choosing a Suitable Version</a></li><li class="chapter-item expanded "><a href="../../chapter_4/4.1/4.1.4.html"><strong aria-hidden="true">4.1.4.</strong> Overview of ESP-IDF SDK Directory</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_4/4.2/index.html"><strong aria-hidden="true">4.2.</strong> Setting Up ESP-IDF Development Environment</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_4/4.2/4.2.1.html"><strong aria-hidden="true">4.2.1.</strong> Setting up ESP-IDF Development Environment on Linux</a></li><li class="chapter-item expanded "><a href="../../chapter_4/4.2/4.2.2.html"><strong aria-hidden="true">4.2.2.</strong> Setting up ESP-IDF Development Environment on Windows</a></li><li class="chapter-item expanded "><a href="../../chapter_4/4.2/4.2.3.html"><strong aria-hidden="true">4.2.3.</strong> Setting up ESP-IDF Development Environment on Mac</a></li><li class="chapter-item expanded "><a href="../../chapter_4/4.2/4.2.4.html"><strong aria-hidden="true">4.2.4.</strong> Installing VS Code</a></li><li class="chapter-item expanded "><a href="../../chapter_4/4.2/4.2.5.html"><strong aria-hidden="true">4.2.5.</strong> Introduction to Third-Party Development Environments</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_4/4.3/index.html"><strong aria-hidden="true">4.3.</strong> ESP-IDF Compilation System</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_4/4.3/4.3.1.html"><strong aria-hidden="true">4.3.1.</strong> Basic Concepts of Compilation System</a></li><li class="chapter-item expanded "><a href="../../chapter_4/4.3/4.3.2.html"><strong aria-hidden="true">4.3.2.</strong> Project File Structure</a></li><li class="chapter-item expanded "><a href="../../chapter_4/4.3/4.3.3.html"><strong aria-hidden="true">4.3.3.</strong> Default Build Rules of the Compilation System</a></li><li class="chapter-item expanded "><a href="../../chapter_4/4.3/4.3.4.html"><strong aria-hidden="true">4.3.4.</strong> Introduction to the Compilation Script</a></li><li class="chapter-item expanded "><a href="../../chapter_4/4.3/4.3.5.html"><strong aria-hidden="true">4.3.5.</strong> Introduction to Common Commands</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_4/4.4/index.html"><strong aria-hidden="true">4.4.</strong> üßê Practice: Compiling Example Program ‚ÄúBlink‚Äù</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_4/4.4/4.4.1.html"><strong aria-hidden="true">4.4.1.</strong> Example Analysis</a></li><li class="chapter-item expanded "><a href="../../chapter_4/4.4/4.4.2.html"><strong aria-hidden="true">4.4.2.</strong> Compiling the Blink Program</a></li><li class="chapter-item expanded "><a href="../../chapter_4/4.4/4.4.3.html"><strong aria-hidden="true">4.4.3.</strong> Flashing the Blink Program</a></li><li class="chapter-item expanded "><a href="../../chapter_4/4.4/4.4.4.html"><strong aria-hidden="true">4.4.4.</strong> Serial Port Log Analysis of the Blink Program</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_4/summary.html"><strong aria-hidden="true">4.5.</strong> Summary</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Hardware and Driver Development</li><li class="chapter-item expanded "><a href="../../chapter_5/index.html"><strong aria-hidden="true">5.</strong> Hardware Design of Smart Light Products based on ESP32-C3</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_5/5.1.html"><strong aria-hidden="true">5.1.</strong> Features and Composition of Smart Light Products</a></li><li class="chapter-item expanded "><a href="../../chapter_5/5.2/index.html"><strong aria-hidden="true">5.2.</strong> Hardware Design of ESP32-C3 Core System</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_5/5.2/5.2.1.html"><strong aria-hidden="true">5.2.1.</strong> Power Supply</a></li><li class="chapter-item expanded "><a href="../../chapter_5/5.2/5.2.2.html"><strong aria-hidden="true">5.2.2.</strong> Power-on Sequence and System Reset</a></li><li class="chapter-item expanded "><a href="../../chapter_5/5.2/5.2.3.html"><strong aria-hidden="true">5.2.3.</strong> SPI Flash</a></li><li class="chapter-item expanded "><a href="../../chapter_5/5.2/5.2.4.html"><strong aria-hidden="true">5.2.4.</strong> Clock Source</a></li><li class="chapter-item expanded "><a href="../../chapter_5/5.2/5.2.5.html"><strong aria-hidden="true">5.2.5.</strong> RF and Antenna</a></li><li class="chapter-item expanded "><a href="../../chapter_5/5.2/5.2.6.html"><strong aria-hidden="true">5.2.6.</strong> Strapping Pins</a></li><li class="chapter-item expanded "><a href="../../chapter_5/5.2/5.2.7.html"><strong aria-hidden="true">5.2.7.</strong> GPIO and PWM Controller</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_5/5.3/index.html"><strong aria-hidden="true">5.3.</strong> üßê Practice: Building a Smart Light System with ESP32-C3</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_5/5.3/5.3.1.html"><strong aria-hidden="true">5.3.1.</strong> Selecting Modules</a></li><li class="chapter-item expanded "><a href="../../chapter_5/5.3/5.3.2.html"><strong aria-hidden="true">5.3.2.</strong> Configuring GPIOs of PWM Signals</a></li><li class="chapter-item expanded "><a href="../../chapter_5/5.3/5.3.3.html"><strong aria-hidden="true">5.3.3.</strong> Downloading Firmware and Debugging Interface</a></li><li class="chapter-item expanded "><a href="../../chapter_5/5.3/5.3.4.html"><strong aria-hidden="true">5.3.4.</strong> Guidelines for RF Design</a></li><li class="chapter-item expanded "><a href="../../chapter_5/5.3/5.3.5.html"><strong aria-hidden="true">5.3.5.</strong> Guidelines for Power Supply Design</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_5/summary.html"><strong aria-hidden="true">5.4.</strong> Summary</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_6/index.html"><strong aria-hidden="true">6.</strong> Driver Development</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_6/6.1.html"><strong aria-hidden="true">6.1.</strong> Driver Development Process</a></li><li class="chapter-item expanded "><a href="../../chapter_6/6.2.html"><strong aria-hidden="true">6.2.</strong> ESP32-C3 Peripheral Applications</a></li><li class="chapter-item expanded "><a href="../../chapter_6/6.3/index.html"><strong aria-hidden="true">6.3.</strong> LED Driver Basics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_6/6.3/6.3.1.html"><strong aria-hidden="true">6.3.1.</strong> Color Spaces</a></li><li class="chapter-item expanded "><a href="../../chapter_6/6.3/6.3.2.html"><strong aria-hidden="true">6.3.2.</strong> LED Driver</a></li><li class="chapter-item expanded "><a href="../../chapter_6/6.3/6.3.3.html"><strong aria-hidden="true">6.3.3.</strong> LED Dimming</a></li><li class="chapter-item expanded "><a href="../../chapter_6/6.3/6.3.4.html"><strong aria-hidden="true">6.3.4.</strong> Introduction to PWM</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_6/6.4/index.html"><strong aria-hidden="true">6.4.</strong> LED Dimming Driver Development</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_6/6.4/6.4.1.html"><strong aria-hidden="true">6.4.1.</strong> Non-Volatile Storage (NVS)</a></li><li class="chapter-item expanded "><a href="../../chapter_6/6.4/6.4.2.html"><strong aria-hidden="true">6.4.2.</strong> LED PWM Controller (LEDC)</a></li><li class="chapter-item expanded "><a href="../../chapter_6/6.4/6.4.3.html"><strong aria-hidden="true">6.4.3.</strong> LED PWM Programming</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_6/6.5/index.html"><strong aria-hidden="true">6.5.</strong> üßê Practice: Adding Drivers to Smart Light Project</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_6/6.5/6.5.1.html"><strong aria-hidden="true">6.5.1.</strong> Button Driver</a></li><li class="chapter-item expanded "><a href="../../chapter_6/6.5/6.5.2.html"><strong aria-hidden="true">6.5.2.</strong> LED Dimming Driver</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_6/summary.html"><strong aria-hidden="true">6.6.</strong> Summary</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Wireless Communication and Control</li><li class="chapter-item expanded "><a href="../../chapter_7/index.html"><strong aria-hidden="true">7.</strong> Wi-Fi Configuration and Connection</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_7/7.1/index.html"><strong aria-hidden="true">7.1.</strong> Basics of Wi-Fi</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_7/7.1/7.1.1.html"><strong aria-hidden="true">7.1.1.</strong> Introduction to Wi-Fi</a></li><li class="chapter-item expanded "><a href="../../chapter_7/7.1/7.1.2.html"><strong aria-hidden="true">7.1.2.</strong> Evolution of IEEE 802.11</a></li><li class="chapter-item expanded "><a href="../../chapter_7/7.1/7.1.3.html"><strong aria-hidden="true">7.1.3.</strong> Wi-Fi Concepts</a></li><li class="chapter-item expanded "><a href="../../chapter_7/7.1/7.1.4.html"><strong aria-hidden="true">7.1.4.</strong> Wi-Fi Connection</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_7/7.2/index.html"><strong aria-hidden="true">7.2.</strong> Basics of Bluetooth</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_7/7.2/7.2.1.html"><strong aria-hidden="true">7.2.1.</strong> Introduction to Bluetooth</a></li><li class="chapter-item expanded "><a href="../../chapter_7/7.2/7.2.2.html"><strong aria-hidden="true">7.2.2.</strong> Bluetooth Concepts</a></li><li class="chapter-item expanded "><a href="../../chapter_7/7.2/7.2.3.html"><strong aria-hidden="true">7.2.3.</strong> Bluetooth Connection</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_7/7.3/index.html"><strong aria-hidden="true">7.3.</strong> Wi-Fi Network Configuration</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_7/7.3/7.3.1.html"><strong aria-hidden="true">7.3.1.</strong> Wi-Fi Network Configuration Guide</a></li><li class="chapter-item expanded "><a href="../../chapter_7/7.3/7.3.2.html"><strong aria-hidden="true">7.3.2.</strong> SoftAP</a></li><li class="chapter-item expanded "><a href="../../chapter_7/7.3/7.3.3.html"><strong aria-hidden="true">7.3.3.</strong> SmartConfig</a></li><li class="chapter-item expanded "><a href="../../chapter_7/7.3/7.3.4.html"><strong aria-hidden="true">7.3.4.</strong> Bluetooth</a></li><li class="chapter-item expanded "><a href="../../chapter_7/7.3/7.3.5.html"><strong aria-hidden="true">7.3.5.</strong> Other Methods</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_7/7.4/index.html"><strong aria-hidden="true">7.4.</strong> Wi-Fi Programming</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_7/7.4/7.4.1.html"><strong aria-hidden="true">7.4.1.</strong> Wi-Fi Components in ESP-IDF</a></li><li class="chapter-item expanded "><a href="../../chapter_7/7.4/7.4.2.html"><strong aria-hidden="true">7.4.2.</strong> Exercise: Wi-Fi Connection</a></li><li class="chapter-item expanded "><a href="../../chapter_7/7.4/7.4.3.html"><strong aria-hidden="true">7.4.3.</strong> Exercise: Smart Wi-Fi Connection</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_7/7.5/index.html"><strong aria-hidden="true">7.5.</strong> üßê Practice: Wi-Fi Configuration in Smart Light Project</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_7/7.5/7.5.1.html"><strong aria-hidden="true">7.5.1.</strong> Wi-Fi Connection in Smart Light Project</a></li><li class="chapter-item expanded "><a href="../../chapter_7/7.5/7.5.2.html"><strong aria-hidden="true">7.5.2.</strong> Smart Wi-Fi Configuration</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_7/summary.html"><strong aria-hidden="true">7.6.</strong> Summary</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_8/index.html"><strong aria-hidden="true">8.</strong> Local Control</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_8/8.1/index.html"><strong aria-hidden="true">8.1.</strong> Introduction to Local Control</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_8/8.1/8.1.1.html"><strong aria-hidden="true">8.1.1.</strong> Application of Local Control</a></li><li class="chapter-item expanded "><a href="../../chapter_8/8.1/8.1.2.html"><strong aria-hidden="true">8.1.2.</strong> Advantages of Local Control</a></li><li class="chapter-item expanded "><a href="../../chapter_8/8.1/8.1.3.html"><strong aria-hidden="true">8.1.3.</strong> Discovering Controlled Devices through Smartphones</a></li><li class="chapter-item expanded "><a href="../../chapter_8/8.1/8.1.4.html"><strong aria-hidden="true">8.1.4.</strong> Data Communication Between Smartphones and Devices</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_8/8.2/index.html"><strong aria-hidden="true">8.2.</strong> Common Local Discovery Methods</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_8/8.2/8.2.1.html"><strong aria-hidden="true">8.2.1.</strong> Broadcast</a></li><li class="chapter-item expanded "><a href="../../chapter_8/8.2/8.2.2.html"><strong aria-hidden="true">8.2.2.</strong> Multicast</a></li><li class="chapter-item expanded "><a href="../../chapter_8/8.2/8.2.3.html"><strong aria-hidden="true">8.2.3.</strong> Comparison Between Broadcast and Multicast</a></li><li class="chapter-item expanded "><a href="../../chapter_8/8.2/8.2.4.html"><strong aria-hidden="true">8.2.4.</strong> Multicast Application Protocol mDNS for Local Discovery</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_8/8.3/index.html"><strong aria-hidden="true">8.3.</strong> Common Communication Protocols for Local Data</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_8/8.3/8.3.1.html"><strong aria-hidden="true">8.3.1.</strong> Transmission Control Protocol (TCP)</a></li><li class="chapter-item expanded "><a href="../../chapter_8/8.3/8.3.2.html"><strong aria-hidden="true">8.3.2.</strong> HyperText Transfer Protocol (HTTP)</a></li><li class="chapter-item expanded "><a href="../../chapter_8/8.3/8.3.3.html"><strong aria-hidden="true">8.3.3.</strong> User Datagram Protocol (UDP)</a></li><li class="chapter-item expanded "><a href="../../chapter_8/8.3/8.3.4.html"><strong aria-hidden="true">8.3.4.</strong> Constrained Application Protocol (CoAP)</a></li><li class="chapter-item expanded "><a href="../../chapter_8/8.3/8.3.5.html"><strong aria-hidden="true">8.3.5.</strong> Bluetooth Protocol</a></li><li class="chapter-item expanded "><a href="../../chapter_8/8.3/8.3.6.html"><strong aria-hidden="true">8.3.6.</strong> Summary of Data Communication Protocols</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_8/8.4/index.html"><strong aria-hidden="true">8.4.</strong> Guarantee of Data Security</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_8/8.4/8.4.1.html"><strong aria-hidden="true">8.4.1.</strong> Introduction to Transport Layer Security (TLS)</a></li><li class="chapter-item expanded "><a href="../../chapter_8/8.4/8.4.2.html"><strong aria-hidden="true">8.4.2.</strong> Introduction to Datagram Transport Layer Security (DTLS)</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_8/8.5/index.html"><strong aria-hidden="true">8.5.</strong> üßê Practice: Local Control in Smart Light Project</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_8/8.5/8.5.1.html"><strong aria-hidden="true">8.5.1.</strong> Creating a Wi-Fi-based Local Control Server</a></li><li class="chapter-item expanded "><a href="../../chapter_8/8.5/8.5.2.html"><strong aria-hidden="true">8.5.2.</strong> Verifying Local Control Functionality using Scripts</a></li><li class="chapter-item expanded "><a href="../../chapter_8/8.5/8.5.3.html"><strong aria-hidden="true">8.5.3.</strong> Creating a Bluetooth-based Local Control Server</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_8/summary.html"><strong aria-hidden="true">8.6.</strong> Summary</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_9/index.html"><strong aria-hidden="true">9.</strong> Cloud Control</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_9/9.1.html"><strong aria-hidden="true">9.1.</strong> Introduction to Remote Control</a></li><li class="chapter-item expanded "><a href="../../chapter_9/9.2/index.html"><strong aria-hidden="true">9.2.</strong> Cloud Data Communication Protocols</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_9/9.2/9.2.1.html"><strong aria-hidden="true">9.2.1.</strong> MQTT Introduction</a></li><li class="chapter-item expanded "><a href="../../chapter_9/9.2/9.2.2.html"><strong aria-hidden="true">9.2.2.</strong> MQTT Principles</a></li><li class="chapter-item expanded "><a href="../../chapter_9/9.2/9.2.3.html"><strong aria-hidden="true">9.2.3.</strong> MQTT Message Format</a></li><li class="chapter-item expanded "><a href="../../chapter_9/9.2/9.2.4.html"><strong aria-hidden="true">9.2.4.</strong> Protocol Comparison</a></li><li class="chapter-item expanded "><a href="../../chapter_9/9.2/9.2.5.html"><strong aria-hidden="true">9.2.5.</strong> Setting Up MQTT Broker on Linux and Windows</a></li><li class="chapter-item expanded "><a href="../../chapter_9/9.2/9.2.6.html"><strong aria-hidden="true">9.2.6.</strong> Setting Up MQTT Client Based on ESP-IDF</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_9/9.3/index.html"><strong aria-hidden="true">9.3.</strong> Ensuring MQTT Data Security</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_9/9.3/9.3.1.html"><strong aria-hidden="true">9.3.1.</strong> Meaning and Function of Certificates</a></li><li class="chapter-item expanded "><a href="../../chapter_9/9.3/9.3.2.html"><strong aria-hidden="true">9.3.2.</strong> Generating Certificates Locally</a></li><li class="chapter-item expanded "><a href="../../chapter_9/9.3/9.3.3.html"><strong aria-hidden="true">9.3.3.</strong> Configuring MQTT Broker</a></li><li class="chapter-item expanded "><a href="../../chapter_9/9.3/9.3.4.html"><strong aria-hidden="true">9.3.4.</strong> Configuring MQTT Client</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_9/9.4/index.html"><strong aria-hidden="true">9.4.</strong> üßê Practice: Remote Control through ESP RainMaker</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_9/9.4/9.4.1.html"><strong aria-hidden="true">9.4.1.</strong> ESP RainMaker Basics</a></li><li class="chapter-item expanded "><a href="../../chapter_9/9.4/9.4.2.html"><strong aria-hidden="true">9.4.2.</strong> Node and Cloud Backend Communication Protocol</a></li><li class="chapter-item expanded "><a href="../../chapter_9/9.4/9.4.3.html"><strong aria-hidden="true">9.4.3.</strong> Communication between Client and Cloud Backend</a></li><li class="chapter-item expanded "><a href="../../chapter_9/9.4/9.4.4.html"><strong aria-hidden="true">9.4.4.</strong> User Roles</a></li><li class="chapter-item expanded "><a href="../../chapter_9/9.4/9.4.5.html"><strong aria-hidden="true">9.4.5.</strong> Basic Services</a></li><li class="chapter-item expanded "><a href="../../chapter_9/9.4/9.4.6.html"><strong aria-hidden="true">9.4.6.</strong> Smart Light Example</a></li><li class="chapter-item expanded "><a href="../../chapter_9/9.4/9.4.7.html"><strong aria-hidden="true">9.4.7.</strong> RainMaker App and Third-Party Integrations</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_9/summary.html"><strong aria-hidden="true">9.5.</strong> Summary</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_10/index.html"><strong aria-hidden="true">10.</strong> Smartphone App Development</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_10/10.1/index.html"><strong aria-hidden="true">10.1.</strong> Introduction to Smartphone App Development</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_10/10.1/10.1.1.html"><strong aria-hidden="true">10.1.1.</strong> Overview of Smartphone App Development</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.1/10.1.2.html"><strong aria-hidden="true">10.1.2.</strong> Structure of the Android Project</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.1/10.1.3.html"><strong aria-hidden="true">10.1.3.</strong> Structure of the iOS Project</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.1/10.1.4.html"><strong aria-hidden="true">10.1.4.</strong> Lifecycle of an Android Activity</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.1/10.1.5.html"><strong aria-hidden="true">10.1.5.</strong> Lifecycle of iOS ViewController</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_10/10.2/index.html"><strong aria-hidden="true">10.2.</strong> Creating a New Smartphone App Project</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_10/10.2/10.2.1.html"><strong aria-hidden="true">10.2.1.</strong> Preparing for Android Development</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.2/10.2.2.html"><strong aria-hidden="true">10.2.2.</strong> Creating a New Android Project</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.2/10.2.3.html"><strong aria-hidden="true">10.2.3.</strong> Adding Dependencies for MyRainmaker</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.2/10.2.4.html"><strong aria-hidden="true">10.2.4.</strong> Permission Request in Android</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.2/10.2.5.html"><strong aria-hidden="true">10.2.5.</strong> Preparing for iOS Development</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.2/10.2.6.html"><strong aria-hidden="true">10.2.6.</strong> Creating a New iOS Project</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.2/10.2.7.html"><strong aria-hidden="true">10.2.7.</strong> Adding Dependencies for MyRainmaker</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.2/10.2.8.html"><strong aria-hidden="true">10.2.8.</strong> Permission Request in iOS</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_10/10.3/index.html"><strong aria-hidden="true">10.3.</strong> Analysis of the App‚Äôs Functional Requirements</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_10/10.3/10.3.1.html"><strong aria-hidden="true">10.3.1.</strong> Analysis of the Project‚Äôs Functional Requirements</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.3/10.3.2.html"><strong aria-hidden="true">10.3.2.</strong> Analysis of User Management Requirements</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.3/10.3.3.html"><strong aria-hidden="true">10.3.3.</strong> Analysis of Device Provisioning and Binding Requirements</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.3/10.3.4.html"><strong aria-hidden="true">10.3.4.</strong> Analysis of Remote-Control Requirements</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.3/10.3.5.html"><strong aria-hidden="true">10.3.5.</strong> Analysis of Scheduling Requirements</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.3/10.3.6.html"><strong aria-hidden="true">10.3.6.</strong> Analysis of User Center Requirements</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_10/10.4/index.html"><strong aria-hidden="true">10.4.</strong> Development of User Management</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_10/10.4/10.4.1.html"><strong aria-hidden="true">10.4.1.</strong> Introduction to RainMaker APIs</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.4/10.4.2.html"><strong aria-hidden="true">10.4.2.</strong> Initiating Communication via Smartphone</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.4/10.4.3.html"><strong aria-hidden="true">10.4.3.</strong> Account Registration</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.4/10.4.4.html"><strong aria-hidden="true">10.4.4.</strong> Account Login</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_10/10.5/index.html"><strong aria-hidden="true">10.5.</strong> Development of Device Provisioning</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_10/10.5/10.5.1.html"><strong aria-hidden="true">10.5.1.</strong> Scanning Devices</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.5/10.5.2.html"><strong aria-hidden="true">10.5.2.</strong> Connecting Devices</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.5/10.5.3.html"><strong aria-hidden="true">10.5.3.</strong> Generating Secret Keys</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.5/10.5.4.html"><strong aria-hidden="true">10.5.4.</strong> Getting Node ID</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.5/10.5.5.html"><strong aria-hidden="true">10.5.5.</strong> Provisioning Devices</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_10/10.6/index.html"><strong aria-hidden="true">10.6.</strong> Development of Device Control</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_10/10.6/10.6.1.html"><strong aria-hidden="true">10.6.1.</strong> Binding Devices to Cloud Accounts</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.6/10.6.2.html"><strong aria-hidden="true">10.6.2.</strong> Getting a List of Devices</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.6/10.6.3.html"><strong aria-hidden="true">10.6.3.</strong> Getting Device Status</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.6/10.6.4.html"><strong aria-hidden="true">10.6.4.</strong> Changing Device Status</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_10/10.7/index.html"><strong aria-hidden="true">10.7.</strong> Development of Scheduling and User Center</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_10/10.7/10.7.1.html"><strong aria-hidden="true">10.7.1.</strong> Implementing Scheduling Function</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.7/10.7.2.html"><strong aria-hidden="true">10.7.2.</strong> Implementing User Center</a></li><li class="chapter-item expanded "><a href="../../chapter_10/10.7/10.7.3.html"><strong aria-hidden="true">10.7.3.</strong> More Cloud APIs</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_10/summary.html"><strong aria-hidden="true">10.8.</strong> Summary</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_11/index.html"><strong aria-hidden="true">11.</strong> Firmware Upgrade and Version Management</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_11/11.1/index.html"><strong aria-hidden="true">11.1.</strong> Firmware Upgrade</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_11/11.1/11.1.1.html"><strong aria-hidden="true">11.1.1.</strong> Overview of Partition Tables</a></li><li class="chapter-item expanded "><a href="../../chapter_11/11.1/11.1.2.html"><strong aria-hidden="true">11.1.2.</strong> Firmware Boot Process</a></li><li class="chapter-item expanded "><a href="../../chapter_11/11.1/11.1.3.html"><strong aria-hidden="true">11.1.3.</strong> Overview of the OTA Mechanism</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_11/11.2/index.html"><strong aria-hidden="true">11.2.</strong> Firmware Version Management</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_11/11.2/11.2.1.html"><strong aria-hidden="true">11.2.1.</strong> Firmware Marking</a></li><li class="chapter-item expanded "><a href="../../chapter_11/11.2/11.2.2.html"><strong aria-hidden="true">11.2.2.</strong> Rollback and Anti-Rollback</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_11/11.3/index.html"><strong aria-hidden="true">11.3.</strong> üßê Practice: Over-the-air (OTA) Example</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_11/11.3/11.3.1.html"><strong aria-hidden="true">11.3.1.</strong> Upgrade Firmware Through a Local Host</a></li><li class="chapter-item expanded "><a href="../../chapter_11/11.3/11.3.2.html"><strong aria-hidden="true">11.3.2.</strong> Upgrade Firmware Through ESP RainMaker</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_11/summary.html"><strong aria-hidden="true">11.4.</strong> Summary</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Optimisation and Mass Production</li><li class="chapter-item expanded "><a href="../../chapter_12/index.html"><strong aria-hidden="true">12.</strong> Power Management and Low-Power Optimisation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_12/12.1/index.html"><strong aria-hidden="true">12.1.</strong> ESP32-C3 Power Management</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_12/12.1/12.1.1.html"><strong aria-hidden="true">12.1.1.</strong> Dynamic Frequency Scaling</a></li><li class="chapter-item expanded "><a href="../../chapter_12/12.1/12.1.2.html"><strong aria-hidden="true">12.1.2.</strong> Power Management Configuration</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_12/12.2/index.html"><strong aria-hidden="true">12.2.</strong> ESP32-C3 Low-Power Mode</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_12/12.2/12.2.1.html"><strong aria-hidden="true">12.2.1.</strong> Modem-sleep mode</a></li><li class="chapter-item expanded "><a href="../../chapter_12/12.2/12.2.2.html" class="active"><strong aria-hidden="true">12.2.2.</strong> Light-sleep Mode</a></li><li class="chapter-item expanded "><a href="../../chapter_12/12.2/12.2.3.html"><strong aria-hidden="true">12.2.3.</strong> Deep-sleep mode</a></li><li class="chapter-item expanded "><a href="../../chapter_12/12.2/12.2.4.html"><strong aria-hidden="true">12.2.4.</strong> Current Consumption in Different Power Modes</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_12/12.3/index.html"><strong aria-hidden="true">12.3.</strong> Power Management and Low-Power Debugging</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_12/12.3/12.3.1.html"><strong aria-hidden="true">12.3.1.</strong> Log Debugging</a></li><li class="chapter-item expanded "><a href="../../chapter_12/12.3/12.3.2.html"><strong aria-hidden="true">12.3.2.</strong> GPIO Debugging</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_12/12.4/index.html"><strong aria-hidden="true">12.4.</strong> Practice: Power Management in Smart Light Project</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_12/12.4/12.4.1.html"><strong aria-hidden="true">12.4.1.</strong> Configuring Power Management Feature</a></li><li class="chapter-item expanded "><a href="../../chapter_12/12.4/12.4.2.html"><strong aria-hidden="true">12.4.2.</strong> Use Power Management Locks</a></li><li class="chapter-item expanded "><a href="../../chapter_12/12.4/12.4.3.html"><strong aria-hidden="true">12.4.3.</strong> Verifying Power Consumption</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_12/summary.html"><strong aria-hidden="true">12.5.</strong> Summary</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_13/index.html"><strong aria-hidden="true">13.</strong> Enhanced Device Security Features</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_13/13.1/index.html"><strong aria-hidden="true">13.1.</strong> Overview of IoT Device Data Security</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_13/13.1/13.1.1.html"><strong aria-hidden="true">13.1.1.</strong> Why Securing IoT Device Data?</a></li><li class="chapter-item expanded "><a href="../../chapter_13/13.1/13.1.2.html"><strong aria-hidden="true">13.1.2.</strong> Basic Requirements for IoT Device Data Security</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_13/13.2/index.html"><strong aria-hidden="true">13.2.</strong> Data Integrity Protection</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_13/13.2/13.2.1.html"><strong aria-hidden="true">13.2.1.</strong> Introduction to Integrity Verification Method</a></li><li class="chapter-item expanded "><a href="../../chapter_13/13.2/13.2.2.html"><strong aria-hidden="true">13.2.2.</strong> Integrity Verification of Firmware Data</a></li><li class="chapter-item expanded "><a href="../../chapter_13/13.2/13.2.3.html"><strong aria-hidden="true">13.2.3.</strong> Example</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_13/13.3/index.html"><strong aria-hidden="true">13.3.</strong> Data Confidentiality Protection</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_13/13.3/13.3.1.html"><strong aria-hidden="true">13.3.1.</strong> Introduction to Data Encryption</a></li><li class="chapter-item expanded "><a href="../../chapter_13/13.3/13.3.2.html"><strong aria-hidden="true">13.3.2.</strong> Introduction to Flash Encryption Scheme</a></li><li class="chapter-item expanded "><a href="../../chapter_13/13.3/13.3.3.html"><strong aria-hidden="true">13.3.3.</strong> Flash Encryption Key Storage</a></li><li class="chapter-item expanded "><a href="../../chapter_13/13.3/13.3.4.html"><strong aria-hidden="true">13.3.4.</strong> Working Mode of Flash Encryption</a></li><li class="chapter-item expanded "><a href="../../chapter_13/13.3/13.3.5.html"><strong aria-hidden="true">13.3.5.</strong> Flash Encryption Process</a></li><li class="chapter-item expanded "><a href="../../chapter_13/13.3/13.3.6.html"><strong aria-hidden="true">13.3.6.</strong> Introduction to NVS Encryption</a></li><li class="chapter-item expanded "><a href="../../chapter_13/13.3/13.3.7.html"><strong aria-hidden="true">13.3.7.</strong> Examples of Flash Encryption and NVS Encryption</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_13/13.4/index.html"><strong aria-hidden="true">13.4.</strong> Data Legitimacy Protection</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_13/13.4/13.4.1.html"><strong aria-hidden="true">13.4.1.</strong> Introduction to Digital Signature</a></li><li class="chapter-item expanded "><a href="../../chapter_13/13.4/13.4.2.html"><strong aria-hidden="true">13.4.2.</strong> Overview of Secure Boot Scheme</a></li><li class="chapter-item expanded "><a href="../../chapter_13/13.4/13.4.3.html"><strong aria-hidden="true">13.4.3.</strong> Introduction to Software Secure Boot</a></li><li class="chapter-item expanded "><a href="../../chapter_13/13.4/13.4.4.html"><strong aria-hidden="true">13.4.4.</strong> Introduction to Hardware Secure Boot</a></li><li class="chapter-item expanded "><a href="../../chapter_13/13.4/13.4.5.html"><strong aria-hidden="true">13.4.5.</strong> Examples</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_13/13.5/index.html"><strong aria-hidden="true">13.5.</strong> Practice: Security Features In Mass Production</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_13/13.5/13.5.1.html"><strong aria-hidden="true">13.5.1.</strong> Flash Encryption and Secure Boot</a></li><li class="chapter-item expanded "><a href="../../chapter_13/13.5/13.5.2.html"><strong aria-hidden="true">13.5.2.</strong> Enabling Flash Encryption and Secure Boot with Batch Flash Tools</a></li><li class="chapter-item expanded "><a href="../../chapter_13/13.5/13.5.3.html"><strong aria-hidden="true">13.5.3.</strong> Enabling Flash Encryption and Secure Boot in Smart Light Project</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_13/summary.html"><strong aria-hidden="true">13.6.</strong> Summary</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_14/index.html"><strong aria-hidden="true">14.</strong> Firmware Burning and Testing for Mass Production</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_14/14.1/index.html"><strong aria-hidden="true">14.1.</strong> Firmware Burning in Mass Production</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_14/14.1/14.1.1.html"><strong aria-hidden="true">14.1.1.</strong> Defining Data Partitions</a></li><li class="chapter-item expanded "><a href="../../chapter_14/14.1/14.1.2.html"><strong aria-hidden="true">14.1.2.</strong> Firmware Burning</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_14/14.2.html"><strong aria-hidden="true">14.2.</strong> Mass Production Testing</a></li><li class="chapter-item expanded "><a href="../../chapter_14/14.3.html"><strong aria-hidden="true">14.3.</strong> Practice: Mass Production Data in Smart Light Project</a></li><li class="chapter-item expanded "><a href="../../chapter_14/summary.html"><strong aria-hidden="true">14.4.</strong> Summary</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_15/index.html"><strong aria-hidden="true">15.</strong> ESP Insights: Remote Monitoring Platform</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_15/15.1.html"><strong aria-hidden="true">15.1.</strong> Introduction to ESP Insights</a></li><li class="chapter-item expanded "><a href="../../chapter_15/15.2/index.html"><strong aria-hidden="true">15.2.</strong> Getting Started with ESP Insights</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapter_15/15.2/15.2.1.html"><strong aria-hidden="true">15.2.1.</strong> Getting Started with ESP Insights in the esp-insights Project</a></li><li class="chapter-item expanded "><a href="../../chapter_15/15.2/15.2.2.html"><strong aria-hidden="true">15.2.2.</strong> Running Example in the esp-insights Project</a></li><li class="chapter-item expanded "><a href="../../chapter_15/15.2/15.2.3.html"><strong aria-hidden="true">15.2.3.</strong> Reporting Coredump Information</a></li><li class="chapter-item expanded "><a href="../../chapter_15/15.2/15.2.4.html"><strong aria-hidden="true">15.2.4.</strong> Customising Logs of Interest</a></li><li class="chapter-item expanded "><a href="../../chapter_15/15.2/15.2.5.html"><strong aria-hidden="true">15.2.5.</strong> Reporting Reboot Reason</a></li><li class="chapter-item expanded "><a href="../../chapter_15/15.2/15.2.6.html"><strong aria-hidden="true">15.2.6.</strong> Reporting Custom Metrics</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapter_15/15.3.html"><strong aria-hidden="true">15.3.</strong> Practice: Using ESP Insights in Smart Light Project</a></li><li class="chapter-item expanded "><a href="../../chapter_15/summary.html"><strong aria-hidden="true">15.4.</strong> Summary</a></li></ol></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">ESP32-C3 Wireless Adventure: A Comprehensive Guide to IoT</h1>

                    <div class="right-buttons">
                                                <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        <a href="https://github.com/espressif/esp32-c3-book-en/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                                                                        <a href="https://github.com/espressif/esp32-c3-book-en/blob/main/WRITINGS.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>
                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="light-sleep-mode"><a class="header" href="#light-sleep-mode">Light-sleep Mode</a></h1>
<p>Light-sleep mode functions in a similar manner to Modem-sleep mode, with
the exception that in Light-sleep mode, the ESP32-C3 will power down the
RF module and digital peripherals, while most of the RAM will be limited
by clock gating. Additionally, the CPU will be paused, resulting in
lower power consumption compared to Modem-sleep mode. After waking up
from Light-sleep mode, ESP32-C3's peripherals and CPU will resume
operation, and their internal state will be preserved. The wakeup
latency in Light-sleep mode is less than 1 ms. There are two ways to put
ESP32-C3 into Light-sleep mode:</p>
<h3 id="entering-light-sleep-mode-manually"><a class="header" href="#entering-light-sleep-mode-manually">Entering Light-sleep mode manually</a></h3>
<p>This is achieved by calling APIs. To enter Light-sleep mode manually, it
is necessary to configure Wi-Fi as a wakeup source to allow the device
to receive interactive information from either a smartphone or a server
through the router.</p>
<h3 id="entering-light-sleep-mode-automatically"><a class="header" href="#entering-light-sleep-mode-automatically">Entering Light-sleep mode automatically</a></h3>
<p>After being configured to automatically enter Light-sleep mode, ESP32-C3
will automatically enter Light-sleep mode when the CPU and RF module are
idle and can be automatically woken up to receive interactive
information from the smartphone or server through the router.</p>
<h2 id="wakeup-sources-in-light-sleep-mode"><a class="header" href="#wakeup-sources-in-light-sleep-mode">Wakeup sources in Light-sleep mode</a></h2>
<p>Manually entering Light-sleep mode requires configuring a wakeup source,
which can be set to timers, GPIOs, UART, Wi-Fi, or Bluetooth LE for
ESP32-C3. ESP32-C3 supports configuring one or more wakeup sources at
the same time, in which case ESP32-C3 will be woken up when either
wakeup source is triggered. Users can use <code>esp_sleep_enable_*_wakeup()</code>
function to configure wakeup sources, or use
<code>esp_sleep_disable_wakeup_source()</code> function to disable a wakeup source.
Before entering Light-sleep mode, users can configure the wake source at
any time. After waking up, users can determine which wakeup source was
responsible for waking up the chip by calling
<code>esp_sleep_get_wakeup_cause()</code> function. Available wakeup sources in
Light-sleep include:</p>
<h3 id="gpio-wakeup"><a class="header" href="#gpio-wakeup">GPIO wakeup</a></h3>
<p>Any GPIO can be used as the external input to wake up the chip from
Light-sleep mode. Each pin can be individually configured to trigger
wakeup on high or low level using the <code>gpio_wakeup_enable()</code> function.
GPIO wakeup can be used for any type of GPIO (RTC IO or digital IO).
Then the <code>esp_sleep_enable_gpio_wakeup()</code> function should be called to
enable this wakeup source.</p>
<h3 id="timer-wakeup"><a class="header" href="#timer-wakeup">Timer wakeup</a></h3>
<p>The RTC controller has a built-in timer which can be used to wake up the
chip after a predefined amount of time. Time is specified at microsecond
precision, but the actual resolution depends on the clock source
selected for the RTC <code>SLOW_CLK</code>. RTC peripherals or RTC memories don't
need to be powered on during sleep in this wakeup mode.
<code>esp_sleep_enable_timer_wakeup()</code> function can be used to enable sleep
wakeup using a timer.</p>
<h3 id="uart-wakeup"><a class="header" href="#uart-wakeup">UART wakeup</a></h3>
<p>When ESP32-C3 receives UART input from external devices, it is often
necessary to wake up the chip when input data is available. The UART
peripheral contains a feature which allows waking up the chip from
Light-sleep mode when a certain number of rising edges on RX pin are
seen. This number of rising edges can be set using
<code>uart_set_wakeup_threshold()</code>. Note that the character which triggers wakeup (and any
characters before it) will not be received by the UART after wakeup.
This means that the external device typically needs to send an extra
character to the ESP32-C3 to trigger wakeup before sending the data.
<code>esp_sleep_enable_uart_wakeup()</code> function can be used to enable this
wakeup source.</p>
<h3 id="wi-fi-wakeup"><a class="header" href="#wi-fi-wakeup">Wi-Fi wakeup</a></h3>
<p>When maintaining a Wi-Fi connection is required, the Wi-Fi can be
configured as a wake source to wake up ESP32-C3. The ESP32-C3 wakes up
before each DTIM beacon of the AP arrives and turns on its RF module,
thus maintaining a Wi-Fi connection. <code>esp_sleep_enable_wifi_wakeup()</code> function can be used to enable this wakeup source.</p>
<h2 id="entering-light-sleep-mode-manually-1"><a class="header" href="#entering-light-sleep-mode-manually-1">Entering Light-sleep mode manually</a></h2>
<p>To manually enter the Light-sleep mode, users can call corresponding
APIs to send ESP32-C3 into Light-sleep mode when needed. After entering
Light-sleep mode, ESP32-C3 will turn off the RF module and pause its
CPU. After waking up from Light-sleep mode, ESP32-C3 will continue to
execute the original program at the location where the Light-sleep API
was called. After manually entering the Light-sleep mode, ESP32-C3 can
maintain the connection to the router by enabling Wi-Fi as the wake
source and receive interactive information from the smartphone or server
through the router. However, if Wi-Fi is not enabled as a wake source,
ESP32-C3 may not receive packets in the network or disconnect the Wi-Fi
connection. The situation of enabling/disabling Bluetooth LE as a wake
source is similar.</p>
<blockquote>
<p>üìå <strong>Tip</strong></p>
<ul>
<li>
<p>After calling the interface that manually send the chip into Light-sleep mode, ESP32-C3 will not immediately enter the Light-sleep mode, but will wait until the system is idle first.</p>
</li>
<li>
<p>With the Wi-Fi wakeup source enabled, only by entering the Light-sleep mode manually can ESP32-C3 maintain the connection with the router and receive the data sent in the network.</p>
</li>
</ul>
</blockquote>
<h2 id="instructions-on-how-to-enter-light-sleep-mode-manually"><a class="header" href="#instructions-on-how-to-enter-light-sleep-mode-manually">Instructions on how to enter Light-sleep mode manually</a></h2>
<p>After configuring the wakeup source, users can manually send the chip
into Light-sleep mode by calling <code>esp_light_sleep_start()</code> function. The
code is as follows:</p>
<pre><code class="language-c">#define BUTTON_WAKEUP_LEVEL_DEFAULT 0
#define BUTTON_GPIO_NUM_DEFAULT     9

/*Configure the button GPIO as input, enable wakeup*/
const int button_gpio_num   = BUTTON_GPIO_NUM_DEFAULT;
const int wakeup_level      = BUTTON_WAKEUP_LEVEL_DEFAULT;
gpio_config_t config = {
    .pin_bit_mask   = BIT64(button_gpio_num),
    .mode           = GPIO_MODE_INPUT
};
ESP_ERROR_CHECK(gpio_config(&amp;config));
gpio_wakeup_enable(button_gpio_num, wakeup_level == 0 ?
                   GPIO_INTR_LOW_LEVEL : GPIO_INTR_HIGH_LEVEL);

/*Wake up in 2 seconds, or when button is pressed*/
esp_sleep_enable_timer_wakeup(2000000);
esp_sleep_enable_gpio_wakeup();

/*Enter sleep mode*/
esp_light_sleep_start();
/*Execution continues here after wakeup*/
</code></pre>
<p>When no wakeup source is enabled, ESP32-C3 can still enter Light-sleep
mode. However, in this case, ESP32-C3 will remain in Light-sleep mode
until an external chip reset.</p>
<h2 id="entering-light-sleep-mode-automatically-1"><a class="header" href="#entering-light-sleep-mode-automatically-1">Entering Light-sleep mode automatically</a></h2>
<p>ESP32-C3 can be configured to automatically enter Light-sleep mode when
it is idle and does not need the RF module to work, and automatically
woken up when it needs to work (such as maintaining Wi-Fi and Bluetooth
LE connections or receiving data). In this case, users don't need to
send the chip into Light-sleep mode manually, nor configure the wakeup
source separately. After being configured to automatically enter
Light-sleep mode, ESP32-C3 can maintain the connection to the router and
receive interactive information from the smartphone or server through
the router, thus improving user experience. The Bluetooth LE connection
is similar to connecting to a router. Typically, automatic Light-sleep
mode is used in conjunction with Modem-sleep mode and power management.
When its RF module is not required, ESP32-C3 first enters Modem-sleep
mode. If it is idle at this time, ESP32-C3 will enter Light-sleep mode
to further reduce power consumption. The Modem-sleep mode of ESP32-C3 is
shown in Figure 12.2.</p>
<figure align="center">
    <img src="../../Pics/D12Z/12-2.png" width="90%">
    <figcaption>Figure 12.2. Modem-sleep mode of ESP32-C3</figcaption>
</figure>
<p>Automatic Light-sleep mode can be useful in scenarios that require
ESP32-C3 to maintain a connection with the router and respond to data
sent by the router in real time, but can be idle when no data needs to
be received. For example, in the application of a Wi-Fi smart switch,
the CPU remains idle most of the time until it receives a control
command. Only upon receiving this command, the CPU activates and
controls the switch to turn on or off.</p>
<h2 id="instructions-on-how-to-enter-light-sleep-mode-automatically"><a class="header" href="#instructions-on-how-to-enter-light-sleep-mode-automatically">Instructions on how to enter Light-sleep mode automatically</a></h2>
<p>To configure enable the automatic Light-sleep mode, users can call <code>esp_pm_configure()</code> function and set parameter <code>light_sleep_enable</code> to <code>true</code>. When this feature is enabled, note that <code>CONFIG_FREERTOS_USE_TICKLESS_IDLE</code> and <code>CONFIG_PM_ENABLE</code> options must also be configured.</p>
<p>To configure <code>CONFIG_PM_ENABLE</code> option, users can run <code>idf.py menuconfig</code> command to start the configuration tool, go to <code>Component config ‚Üí Power Management</code>, then enable <code>Support for power management</code>. The configuration of the ESP32-C3 power management function is shown in Figure 12.3.</p>
<figure align="center">
    <img src="../../Pics/D12Z/12-3.png" width="90%">
    <figcaption>Figure 12.3. ESP32-C3 power management configuration</figcaption>
</figure>
<p>Users can enable the Dynamic Frequency Modulation (DFS) feature and configure the chip to automatically enter Light-sleep mode by calling <code>esp_pm_configure()</code> function. When using ESP32-C3, the corresponding parameter of this function is <code>esp_pm_config_esp32c3_t</code>, which is a structure that defines the relevant DFS settings and controls if the chip can automatically enter Light-sleep mode. In the above structure, the following three member variables (fields) need to be initialised:</p>
<ul>
<li>
<p><code>max_freq_mhz</code>: Maximum CPU frequency in MHz, i.e., the frequency
used when <code>ESP_PM_CPU_FREQ_MAX</code> lock is acquired. This field is usually set to <code>CONFIG_ESP32C3_DEFAULT_CPU_FREQ_MHZ</code>.</p>
</li>
<li>
<p><code>min_freq_mhz</code>: Minimum CPU frequency in MHz, i.e., the frequency
used when only the <code>ESP_PM_APB_FREQ_MAX</code> lock is acquired. This
field can be set to the XTAL frequency value, or the XTAL frequency
divided by an integer. Note that 10 MHz is the lowest frequency at
which the default <code>REF_TICK</code> clock of 1 MHz can be generated.</p>
</li>
<li>
<p><code>light_sleep_enable</code>: Whether ESP32-C3 should automatically enter
Light-sleep mode when no locks are acquired (<code>true</code>/<code>false</code>).</p>
</li>
</ul>
<p>Automatic Light-sleep mode is based on FreeRTOS Tickless Idle functionality. If Automatic Light-sleep mode is requested while the option <code>CONFIG_FREERTOS_USE_TICKLESS_IDLE</code> is not enabled in <code>menuconfig</code>, <code>esp_pm_configure()</code> will return the error <code>ESP_ERR_NOT_SUPPORTED</code>. Configuration of ESP32-C3's FreeRTOS Tickless Idle feature is shown in Figure 12.4.</p>
<figure align="center">
    <img src="../../Pics/D12Z/12-4.png" width="90%">
    <figcaption>Figure 12.4. Configuration of ESP32-C3's FreeRTOS Tickless Idle feature</figcaption>
</figure>
<pre><code class="language-c">#if CONFIG_PM_ENABLE
    //Configure dynamic frequency scaling:
    //automatic light sleep is enabled if tickless idle support is enabled.
    esp_pm_config_ESP32-C3_t pm_config = {
        .max_freq_mhz = 160, //Maximum CPU frequency
        .min_freq_mhz = 10,  //Minimum CPU frequency
#if CONFIG_FREERTOS_USE_TICKLESS_IDLE
        .light_sleep_enable = true
#endif
    };
    ESP_ERROR_CHECK( esp_pm_configure(&amp;pm_config) );
#endif //CONFIG_PM_ENABLE
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="../../chapter_12/12.2/12.2.1.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="../../chapter_12/12.2/12.2.3.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="../../chapter_12/12.2/12.2.1.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="../../chapter_12/12.2/12.2.3.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
